---
date: 2012-08-27 21:05:07+00:00
layout: post
title: 关于 PHP 运算符优先级的问题
categories:
- 技术生活
tags:
- PHP
---

[![QQ截图20120827211405.png](/uploadfile/upload/996fef4691ef4fb1e06a12d9f51086dc20120827131421.png)](/uploadfile/upload/996fef4691ef4fb1e06a12d9f51086dc20120827131421.png)  

今天群里有朋友提出上图这样的问题，说第一段代码可以理解，但是第二段为什么`$a`的值不是`4`而是个布尔类型，并且`$b`等于`6`，而不是`7`？

其实把第13行代码这样写，相信大家就明白了。
{% highlight php %}
<?php
if ($a = (3 || $b = 7))
{% endhighlight %}

`||` 运算符只要左右两边只要有一个为真整个表达式即为真，所以`3`是为真的，所以`$b=7`根本没有执行，表达式的值赋给了`$a`，也就是`true`，而`$b=7`没有执行，所以`$b`依然为`5`，自增后为`6`。  

可能有的同学说，`$a=true`，那么递增后，不就是应该等于`1++`吗，为什么不等于`2`？  

其实 PHP 手册中说得很清楚，自增运算符对布尔类型无效，所以起不到任何效果，官方解释如下。

[![QQ截图20120827212520.png](/uploadfile/upload/cc1a23f5a1d667dd7c252d449f51305b20120827132536.png)](/uploadfile/upload/cc1a23f5a1d667dd7c252d449f51305b20120827132536.png)  

这个问题其实就是运算符优先级的考查，理解之后一点难度也没有。  

再看这样的问题：  
{% highlight php %}
<?php
$a = $b = 1 and 0; // $a = $b = 1
$a = $b = 1 & 0; // $a = $b = 0
{% endhighlight %}

为什么出现如此结果呢？原因就是 `&` > `=` > `and`，所以上面等效于下面。
{% highlight php %}
<?php
($a = $b = 1) and 0; // $a = $b = 1
$a = $b = (1 & 0); // $a = $b = 0
{% endhighlight %}

这样是不是这理解了呢？